{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import FlatList from\"react-native-web/dist/exports/FlatList\";import Animated from\"react-native-web/dist/exports/Animated\";import{Block,theme}from'galio-framework';var _Dimensions$get=Dimensions.get('screen'),width=_Dimensions$get.width;import nowTheme from\"../constants/Theme\";var defaultMenu=[{id:'music',title:'Music'},{id:'beauty',title:'Beauty'},{id:'fashion',title:'Fashion'},{id:'motocycles',title:'Motocycles'}];var Tabs=function(_React$Component){_inherits(Tabs,_React$Component);var _super=_createSuper(Tabs);function Tabs(){var _this;_classCallCheck(this,Tabs);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={active:null};_this.animatedValue=new Animated.Value(1);_this.menuRef=React.createRef();_this.onScrollToIndexFailed=function(){_this.menuRef.current.scrollToIndex({index:0,viewPosition:0.5});};_this.selectMenu=function(id){_this.setState({active:id});_this.menuRef.current.scrollToIndex({index:_this.props.data.findIndex(function(item){return item.id===id;}),viewPosition:0.5});_this.animate();_this.props.onChange&&_this.props.onChange(id);};_this.renderItem=function(item){var isActive=_this.state.active===item.id;var textColor=_this.animatedValue.interpolate({inputRange:[0,1],outputRange:[nowTheme.COLORS.TEXT,isActive?nowTheme.COLORS.WHITE:nowTheme.COLORS.SECONDARY],extrapolate:'clamp'});var containerStyles=[styles.titleContainer,!isActive&&{backgroundColor:nowTheme.COLORS.TABS},isActive&&styles.containerShadow];return React.createElement(Block,{style:containerStyles},React.createElement(Animated.Text,{style:[styles.menuTitle,{color:textColor},{fontFamily:'montserrat-regular'}],onPress:function onPress(){return _this.selectMenu(item.id);}},item.title));};_this.renderMenu=function(){var _this$props=_this.props,data=_this$props.data,props=_objectWithoutProperties(_this$props,[\"data\"]);return React.createElement(FlatList,_extends({},props,{data:data,horizontal:true,ref:_this.menuRef,extraData:_this.state,keyExtractor:function keyExtractor(item){return item.id;},showsHorizontalScrollIndicator:false,onScrollToIndexFailed:_this.onScrollToIndexFailed,renderItem:function renderItem(_ref){var item=_ref.item;return _this.renderItem(item);},contentContainerStyle:styles.menu}));};return _this;}_createClass(Tabs,[{key:\"componentDidMount\",value:function componentDidMount(){var initialIndex=this.props.initialIndex;initialIndex&&this.selectMenu(initialIndex);}},{key:\"animate\",value:function animate(){this.animatedValue.setValue(0);Animated.timing(this.animatedValue,{toValue:1,duration:300}).start();}},{key:\"render\",value:function render(){return React.createElement(Block,{style:styles.container},this.renderMenu());}}]);return Tabs;}(React.Component);Tabs.defaultProps={data:defaultMenu,initialIndex:null};export{Tabs as default};var styles=StyleSheet.create({container:{width:width,backgroundColor:theme.COLORS.WHITE,zIndex:2},shadow:{shadowColor:theme.COLORS.BLACK,shadowOffset:{width:0,height:2},shadowRadius:8,shadowOpacity:0.2,elevation:4},menu:{paddingHorizontal:theme.SIZES.BASE*2.5,paddingTop:8,paddingBottom:16},titleContainer:{alignItems:'center',backgroundColor:nowTheme.COLORS.ACTIVE,borderRadius:21,marginRight:9,paddingHorizontal:10,paddingVertical:3},containerShadow:{shadowColor:'black',shadowOffset:{width:0,height:2},shadowRadius:4,shadowOpacity:0.1,elevation:1},menuTitle:{fontWeight:'600',fontSize:14,paddingVertical:8,paddingHorizontal:12,color:nowTheme.COLORS.MUTED}});","map":{"version":3,"sources":["/Users/yhlau/Arthur/project/wysfyp/frontend副本/components/Tabs.js"],"names":["React","Block","theme","Dimensions","get","width","nowTheme","defaultMenu","id","title","Tabs","state","active","animatedValue","Animated","Value","menuRef","createRef","onScrollToIndexFailed","current","scrollToIndex","index","viewPosition","selectMenu","setState","props","data","findIndex","item","animate","onChange","renderItem","isActive","textColor","interpolate","inputRange","outputRange","COLORS","TEXT","WHITE","SECONDARY","extrapolate","containerStyles","styles","titleContainer","backgroundColor","TABS","containerShadow","menuTitle","color","fontFamily","renderMenu","menu","initialIndex","setValue","timing","toValue","duration","start","container","Component","defaultProps","StyleSheet","create","zIndex","shadow","shadowColor","BLACK","shadowOffset","height","shadowRadius","shadowOpacity","elevation","paddingHorizontal","SIZES","BASE","paddingTop","paddingBottom","alignItems","ACTIVE","borderRadius","marginRight","paddingVertical","fontWeight","fontSize","MUTED"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { StyleSheet, Dimensions, FlatList, Animated } from 'react-native';\nimport { Block, theme } from 'galio-framework';\n\nconst { width } = Dimensions.get('screen');\nimport nowTheme from '../constants/Theme';\n\nconst defaultMenu = [\n  { id: 'music', title: 'Music', },\n  { id: 'beauty', title: 'Beauty', },\n  { id: 'fashion', title: 'Fashion', },\n  { id: 'motocycles', title: 'Motocycles', },\n];\n\nexport default class Tabs extends React.Component {\n  static defaultProps = {\n    data: defaultMenu,\n    initialIndex: null,\n  }\n\n  state = {\n    active: null,\n  }\n\n  componentDidMount() {\n    const { initialIndex } = this.props;\n    initialIndex && this.selectMenu(initialIndex);\n  }\n\n  animatedValue = new Animated.Value(1);\n\n  animate() {\n    this.animatedValue.setValue(0);\n\n    Animated.timing(this.animatedValue, {\n      toValue: 1,\n      duration: 300,\n      // useNativeDriver: true, // color not supported\n    }).start()\n  }\n\n  menuRef = React.createRef();\n\n  onScrollToIndexFailed = () => {\n    this.menuRef.current.scrollToIndex({\n      index: 0,\n      viewPosition: 0.5\n    });\n  }\n\n  selectMenu = (id) => {\n    this.setState({ active: id });\n\n    this.menuRef.current.scrollToIndex({\n      index: this.props.data.findIndex(item => item.id === id),\n      viewPosition: 0.5\n    });\n\n    this.animate();\n    this.props.onChange && this.props.onChange(id);\n  }\n\n  renderItem = (item) => {\n    const isActive = this.state.active === item.id;\n\n    const textColor = this.animatedValue.interpolate({\n      inputRange: [0, 1],\n      outputRange: [nowTheme.COLORS.TEXT, isActive ? nowTheme.COLORS.WHITE : nowTheme.COLORS.SECONDARY],\n      extrapolate: 'clamp',\n    });\n\n    const containerStyles = [\n      styles.titleContainer,\n      !isActive && { backgroundColor: nowTheme.COLORS.TABS },\n      isActive && styles.containerShadow\n    ];\n\n    return (\n      <Block style={containerStyles}>\n        <Animated.Text\n          style={[\n            styles.menuTitle,\n            { color: textColor },\n            { fontFamily: 'montserrat-regular' },\n          ]}\n          onPress={() => this.selectMenu(item.id)}>\n          {item.title}\n        </Animated.Text>\n      </Block>\n    )\n  }\n\n  renderMenu = () => {\n    const { data, ...props } = this.props;\n\n    return (\n      <FlatList\n        {...props}\n        data={data}\n        horizontal={true}\n        ref={this.menuRef}\n        extraData={this.state}\n        keyExtractor={(item) => item.id}\n        showsHorizontalScrollIndicator={false}\n        onScrollToIndexFailed={this.onScrollToIndexFailed}\n        renderItem={({ item }) => this.renderItem(item)}\n        contentContainerStyle={styles.menu}\n      />\n    )\n  }\n\n  render() {\n    return (\n      <Block style={styles.container}>\n        {this.renderMenu()}\n      </Block>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: width,\n    backgroundColor: theme.COLORS.WHITE,\n    zIndex: 2,\n  },\n  shadow: {\n    shadowColor: theme.COLORS.BLACK,\n    shadowOffset: { width: 0, height: 2 },\n    shadowRadius: 8,\n    shadowOpacity: 0.2,\n    elevation: 4,\n  },\n  menu: {\n    paddingHorizontal: theme.SIZES.BASE * 2.5,\n    paddingTop: 8,\n    paddingBottom: 16,\n  },\n  titleContainer: {\n    alignItems: 'center',\n    backgroundColor: nowTheme.COLORS.ACTIVE,\n    borderRadius: 21,\n    marginRight: 9,\n    paddingHorizontal: 10,\n    paddingVertical: 3,\n  },\n  containerShadow: {\n    shadowColor: 'black',\n    shadowOffset: { width: 0, height: 2 },\n    shadowRadius: 4,\n    shadowOpacity: 0.1,\n    elevation: 1,\n  },\n  menuTitle: {\n    fontWeight: '600',\n    fontSize: 14,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    color: nowTheme.COLORS.MUTED\n  },\n});\n"]},"metadata":{},"sourceType":"module"}