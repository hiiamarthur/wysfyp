{"ast":null,"code":"'use strict';import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React,{Component}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import TouchableNativeFeedback from\"react-native-web/dist/exports/TouchableNativeFeedback\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import Modal from\"react-native-web/dist/exports/Modal\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import ListView from\"deprecated-react-native-listview\";import PropTypes from'prop-types';var TOUCHABLE_ELEMENTS=['TouchableHighlight','TouchableOpacity','TouchableWithoutFeedback','TouchableNativeFeedback'];var ModalDropdown=function(_Component){_inherits(ModalDropdown,_Component);var _super=_createSuper(ModalDropdown);function ModalDropdown(_props){var _this;_classCallCheck(this,ModalDropdown);_this=_super.call(this,_props);_this._onButtonPress=function(){var onDropdownWillShow=_this.props.onDropdownWillShow;if(!onDropdownWillShow||onDropdownWillShow()!==false){_this.show();}};_this._onRequestClose=function(){var onDropdownWillHide=_this.props.onDropdownWillHide;if(!onDropdownWillHide||onDropdownWillHide()!==false){_this.hide();}};_this._onModalPress=function(){var onDropdownWillHide=_this.props.onDropdownWillHide;if(!onDropdownWillHide||onDropdownWillHide()!==false){_this.hide();}};_this._renderRow=function(rowData,sectionID,rowID,highlightRow){var _this$props=_this.props,renderRow=_this$props.renderRow,dropdownTextStyle=_this$props.dropdownTextStyle,dropdownTextHighlightStyle=_this$props.dropdownTextHighlightStyle,accessible=_this$props.accessible;var selectedIndex=_this.state.selectedIndex;var key=\"row_\"+rowID;var highlighted=rowID==selectedIndex;var row=!renderRow?React.createElement(Text,{style:[styles.rowText,dropdownTextStyle,highlighted&&styles.highlightedRowText,highlighted&&dropdownTextHighlightStyle]},rowData):renderRow(rowData,rowID,highlighted);var preservedProps={key:key,accessible:accessible,onPress:function onPress(){return _this._onRowPress(rowData,sectionID,rowID,highlightRow);}};if(TOUCHABLE_ELEMENTS.find(function(name){return name==row.type.displayName;})){var props=_objectSpread({},row.props);props.key=preservedProps.key;props.onPress=preservedProps.onPress;var children=row.props.children;switch(row.type.displayName){case'TouchableHighlight':{return React.createElement(TouchableHighlight,props,children);}case'TouchableOpacity':{return React.createElement(TouchableOpacity,props,children);}case'TouchableWithoutFeedback':{return React.createElement(TouchableWithoutFeedback,props,children);}case'TouchableNativeFeedback':{return React.createElement(TouchableNativeFeedback,props,children);}default:break;}}return React.createElement(TouchableHighlight,preservedProps,row);};_this._renderSeparator=function(sectionID,rowID,adjacentRowHighlighted){var key=\"spr_\"+rowID;return React.createElement(View,{style:styles.separator,key:key});};_this._button=null;_this._buttonFrame=null;_this._nextValue=null;_this._nextIndex=null;_this.state={accessible:!!_props.accessible,loading:!_props.options,showDropdown:false,buttonText:_props.defaultValue,selectedIndex:_props.defaultIndex};return _this;}_createClass(ModalDropdown,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var _this$state=this.state,buttonText=_this$state.buttonText,selectedIndex=_this$state.selectedIndex;var defaultIndex=nextProps.defaultIndex,defaultValue=nextProps.defaultValue,options=nextProps.options;buttonText=this._nextValue==null?buttonText:this._nextValue;selectedIndex=this._nextIndex==null?selectedIndex:this._nextIndex;if(selectedIndex<0){selectedIndex=defaultIndex;if(selectedIndex<0){buttonText=defaultValue;}}this._nextValue=null;this._nextIndex=null;this.setState({loading:!options,buttonText:buttonText,selectedIndex:selectedIndex});}},{key:\"render\",value:function render(){return React.createElement(View,this.props,this._renderButton(),this._renderModal());}},{key:\"_updatePosition\",value:function _updatePosition(callback){var _this2=this;if(this._button&&this._button.measure){this._button.measure(function(fx,fy,width,height,px,py){_this2._buttonFrame={x:px,y:py,w:width,h:height};callback&&callback();});}}},{key:\"show\",value:function show(){var _this3=this;this._updatePosition(function(){_this3.setState({showDropdown:true});});}},{key:\"hide\",value:function hide(){this.setState({showDropdown:false});}},{key:\"select\",value:function select(idx){var _this$props2=this.props,defaultValue=_this$props2.defaultValue,options=_this$props2.options,defaultIndex=_this$props2.defaultIndex,renderButtonText=_this$props2.renderButtonText;var value=defaultValue;if(idx==null||!options||idx>=options.length){idx=defaultIndex;}if(idx>=0){value=renderButtonText?renderButtonText(options[idx]):options[idx].toString();}this._nextValue=value;this._nextIndex=idx;this.setState({buttonText:value,selectedIndex:idx});}},{key:\"_renderButton\",value:function _renderButton(){var _this4=this;var _this$props3=this.props,disabled=_this$props3.disabled,accessible=_this$props3.accessible,children=_this$props3.children,textStyle=_this$props3.textStyle;var buttonText=this.state.buttonText;return React.createElement(TouchableOpacity,{ref:function ref(button){return _this4._button=button;},disabled:disabled,accessible:accessible,onPress:this._onButtonPress},children||React.createElement(View,{style:styles.button},React.createElement(Text,{style:[styles.buttonText,textStyle],numberOfLines:1},buttonText)));}},{key:\"_renderModal\",value:function _renderModal(){var _this$props4=this.props,animated=_this$props4.animated,accessible=_this$props4.accessible,dropdownStyle=_this$props4.dropdownStyle;var _this$state2=this.state,showDropdown=_this$state2.showDropdown,loading=_this$state2.loading;if(showDropdown&&this._buttonFrame){var frameStyle=this._calcPosition();var animationType=animated?'fade':'none';return React.createElement(Modal,{animationType:animationType,visible:true,transparent:true,onRequestClose:this._onRequestClose,supportedOrientations:['portrait','portrait-upside-down','landscape','landscape-left','landscape-right']},React.createElement(TouchableWithoutFeedback,{accessible:accessible,disabled:!showDropdown,onPress:this._onModalPress},React.createElement(View,{style:styles.modal},React.createElement(View,{style:[styles.dropdown,dropdownStyle,frameStyle]},loading?this._renderLoading():this._renderDropdown()))));}}},{key:\"_calcPosition\",value:function _calcPosition(){var _this$props5=this.props,dropdownStyle=_this$props5.dropdownStyle,style=_this$props5.style,adjustFrame=_this$props5.adjustFrame;var dimensions=Dimensions.get('window');var windowWidth=dimensions.width;var windowHeight=dimensions.height;var dropdownHeight=dropdownStyle&&StyleSheet.flatten(dropdownStyle).height||StyleSheet.flatten(styles.dropdown).height;var bottomSpace=windowHeight-this._buttonFrame.y-this._buttonFrame.h;var rightSpace=windowWidth-this._buttonFrame.x;var showInBottom=bottomSpace>=dropdownHeight||bottomSpace>=this._buttonFrame.y;var showInLeft=rightSpace>=this._buttonFrame.x;var positionStyle={height:dropdownHeight,top:showInBottom?this._buttonFrame.y+this._buttonFrame.h:Math.max(0,this._buttonFrame.y-dropdownHeight)};if(showInLeft){positionStyle.left=this._buttonFrame.x;}else{var dropdownWidth=dropdownStyle&&StyleSheet.flatten(dropdownStyle).width||style&&StyleSheet.flatten(style).width||-1;if(dropdownWidth!==-1){positionStyle.width=dropdownWidth;}positionStyle.right=rightSpace-this._buttonFrame.w;}return adjustFrame?adjustFrame(positionStyle):positionStyle;}},{key:\"_renderLoading\",value:function _renderLoading(){return React.createElement(ActivityIndicator,{size:\"small\"});}},{key:\"_renderDropdown\",value:function _renderDropdown(){var _this$props6=this.props,scrollEnabled=_this$props6.scrollEnabled,renderSeparator=_this$props6.renderSeparator,showsVerticalScrollIndicator=_this$props6.showsVerticalScrollIndicator,keyboardShouldPersistTaps=_this$props6.keyboardShouldPersistTaps;return React.createElement(ListView,{scrollEnabled:scrollEnabled,style:styles.list,dataSource:this._dataSource,renderRow:this._renderRow,renderSeparator:renderSeparator||this._renderSeparator,automaticallyAdjustContentInsets:false,showsVerticalScrollIndicator:showsVerticalScrollIndicator,keyboardShouldPersistTaps:keyboardShouldPersistTaps});}},{key:\"_onRowPress\",value:function _onRowPress(rowData,sectionID,rowID,highlightRow){var _this$props7=this.props,onSelect=_this$props7.onSelect,renderButtonText=_this$props7.renderButtonText,onDropdownWillHide=_this$props7.onDropdownWillHide;if(!onSelect||onSelect(rowID,rowData)!==false){highlightRow(sectionID,rowID);var value=renderButtonText&&renderButtonText(rowData)||rowData.toString();this._nextValue=value;this._nextIndex=rowID;this.setState({buttonText:value,selectedIndex:rowID});}if(!onDropdownWillHide||onDropdownWillHide()!==false){this.setState({showDropdown:false});}}},{key:\"_dataSource\",get:function get(){var options=this.props.options;var ds=new ListView.DataSource({rowHasChanged:function rowHasChanged(r1,r2){return r1!==r2;}});return ds.cloneWithRows(options);}}]);return ModalDropdown;}(Component);ModalDropdown.propTypes={disabled:PropTypes.bool,scrollEnabled:PropTypes.bool,defaultIndex:PropTypes.number,defaultValue:PropTypes.string,options:PropTypes.array,accessible:PropTypes.bool,animated:PropTypes.bool,showsVerticalScrollIndicator:PropTypes.bool,keyboardShouldPersistTaps:PropTypes.string,style:PropTypes.oneOfType([PropTypes.number,PropTypes.object,PropTypes.array]),textStyle:PropTypes.oneOfType([PropTypes.number,PropTypes.object,PropTypes.array]),dropdownStyle:PropTypes.oneOfType([PropTypes.number,PropTypes.object,PropTypes.array]),dropdownTextStyle:PropTypes.oneOfType([PropTypes.number,PropTypes.object,PropTypes.array]),dropdownTextHighlightStyle:PropTypes.oneOfType([PropTypes.number,PropTypes.object,PropTypes.array]),adjustFrame:PropTypes.func,renderRow:PropTypes.func,renderSeparator:PropTypes.func,renderButtonText:PropTypes.func,onDropdownWillShow:PropTypes.func,onDropdownWillHide:PropTypes.func,onSelect:PropTypes.func};ModalDropdown.defaultProps={disabled:false,scrollEnabled:true,defaultIndex:-1,defaultValue:'Please select...',options:null,animated:true,showsVerticalScrollIndicator:true,keyboardShouldPersistTaps:'never'};export{ModalDropdown as default};var styles=StyleSheet.create({button:{justifyContent:'center'},buttonText:{fontSize:12},modal:{flexGrow:1},dropdown:{position:'absolute',height:(33+StyleSheet.hairlineWidth)*5,borderWidth:StyleSheet.hairlineWidth,borderColor:'lightgray',borderRadius:2,backgroundColor:'white',justifyContent:'center'},loading:{alignSelf:'center'},list:{},rowText:{paddingHorizontal:6,paddingVertical:10,fontSize:11,color:'gray',backgroundColor:'white',textAlignVertical:'center'},highlightedRowText:{color:'black'},separator:{height:StyleSheet.hairlineWidth,backgroundColor:'lightgray'}});","map":{"version":3,"sources":["/Users/yhlau/Arthur/project/wysfyp/frontend副本/node_modules/react-native-modal-dropdown/components/ModalDropdown.js"],"names":["React","Component","ListView","PropTypes","TOUCHABLE_ELEMENTS","ModalDropdown","props","_onButtonPress","onDropdownWillShow","show","_onRequestClose","onDropdownWillHide","hide","_onModalPress","_renderRow","rowData","sectionID","rowID","highlightRow","renderRow","dropdownTextStyle","dropdownTextHighlightStyle","accessible","selectedIndex","state","key","highlighted","row","styles","rowText","highlightedRowText","preservedProps","onPress","_onRowPress","find","name","type","displayName","children","_renderSeparator","adjacentRowHighlighted","separator","_button","_buttonFrame","_nextValue","_nextIndex","loading","options","showDropdown","buttonText","defaultValue","defaultIndex","nextProps","setState","_renderButton","_renderModal","callback","measure","fx","fy","width","height","px","py","x","y","w","h","_updatePosition","idx","renderButtonText","value","length","toString","disabled","textStyle","button","animated","dropdownStyle","frameStyle","_calcPosition","animationType","modal","dropdown","_renderLoading","_renderDropdown","style","adjustFrame","dimensions","Dimensions","get","windowWidth","windowHeight","dropdownHeight","StyleSheet","flatten","bottomSpace","rightSpace","showInBottom","showInLeft","positionStyle","top","Math","max","left","dropdownWidth","right","scrollEnabled","renderSeparator","showsVerticalScrollIndicator","keyboardShouldPersistTaps","list","_dataSource","onSelect","ds","DataSource","rowHasChanged","r1","r2","cloneWithRows","propTypes","bool","number","string","array","oneOfType","object","func","defaultProps","create","justifyContent","fontSize","flexGrow","position","hairlineWidth","borderWidth","borderColor","borderRadius","backgroundColor","alignSelf","paddingHorizontal","paddingVertical","color","textAlignVertical"],"mappings":"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","sourcesContent":["/**\n * Created by sohobloo on 16/9/13.\n */\n\n'use strict';\n\nimport React, {\n  Component,\n} from 'react';\n\nimport {\n  StyleSheet,\n  Dimensions,\n  View,\n  Text,\n  TouchableWithoutFeedback,\n  TouchableNativeFeedback,\n  TouchableOpacity,\n  TouchableHighlight,\n  Modal,\n  ActivityIndicator,\n} from 'react-native';\n\nimport ListView from \"deprecated-react-native-listview\";\nimport PropTypes from 'prop-types';\n\nconst TOUCHABLE_ELEMENTS = [\n  'TouchableHighlight',\n  'TouchableOpacity',\n  'TouchableWithoutFeedback',\n  'TouchableNativeFeedback'\n];\n\nexport default class ModalDropdown extends Component {\n  static propTypes = {\n    disabled: PropTypes.bool,\n    scrollEnabled: PropTypes.bool,\n    defaultIndex: PropTypes.number,\n    defaultValue: PropTypes.string,\n    options: PropTypes.array,\n\n    accessible: PropTypes.bool,\n    animated: PropTypes.bool,\n    showsVerticalScrollIndicator: PropTypes.bool,\n    keyboardShouldPersistTaps: PropTypes.string,\n\n    style: PropTypes.oneOfType([PropTypes.number, PropTypes.object, PropTypes.array]),\n    textStyle: PropTypes.oneOfType([PropTypes.number, PropTypes.object, PropTypes.array]),\n    dropdownStyle: PropTypes.oneOfType([PropTypes.number, PropTypes.object, PropTypes.array]),\n    dropdownTextStyle: PropTypes.oneOfType([PropTypes.number, PropTypes.object, PropTypes.array]),\n    dropdownTextHighlightStyle: PropTypes.oneOfType([PropTypes.number, PropTypes.object, PropTypes.array]),\n\n    adjustFrame: PropTypes.func,\n    renderRow: PropTypes.func,\n    renderSeparator: PropTypes.func,\n    renderButtonText: PropTypes.func,\n\n    onDropdownWillShow: PropTypes.func,\n    onDropdownWillHide: PropTypes.func,\n    onSelect: PropTypes.func\n  };\n\n  static defaultProps = {\n    disabled: false,\n    scrollEnabled: true,\n    defaultIndex: -1,\n    defaultValue: 'Please select...',\n    options: null,\n    animated: true,\n    showsVerticalScrollIndicator: true,\n    keyboardShouldPersistTaps: 'never'\n  };\n\n  constructor(props) {\n    super(props);\n\n    this._button = null;\n    this._buttonFrame = null;\n    this._nextValue = null;\n    this._nextIndex = null;\n\n    this.state = {\n      accessible: !!props.accessible,\n      loading: !props.options,\n      showDropdown: false,\n      buttonText: props.defaultValue,\n      selectedIndex: props.defaultIndex\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let {buttonText, selectedIndex} = this.state;\n    const {defaultIndex, defaultValue, options} = nextProps;\n    buttonText = this._nextValue == null ? buttonText : this._nextValue;\n    selectedIndex = this._nextIndex == null ? selectedIndex : this._nextIndex;\n    if (selectedIndex < 0) {\n      selectedIndex = defaultIndex;\n      if (selectedIndex < 0) {\n        buttonText = defaultValue;\n      }\n    }\n    this._nextValue = null;\n    this._nextIndex = null;\n\n    this.setState({\n      loading: !options,\n      buttonText,\n      selectedIndex\n    });\n  }\n\n  render() {\n    return (\n      <View {...this.props}>\n        {this._renderButton()}\n        {this._renderModal()}\n      </View>\n    );\n  }\n\n  _updatePosition(callback) {\n    if (this._button && this._button.measure) {\n      this._button.measure((fx, fy, width, height, px, py) => {\n        this._buttonFrame = {x: px, y: py, w: width, h: height};\n        callback && callback();\n      });\n    }\n  }\n\n  show() {\n    this._updatePosition(() => {\n      this.setState({\n        showDropdown: true\n      });\n    });\n  }\n\n  hide() {\n    this.setState({\n      showDropdown: false\n    });\n  }\n\n  select(idx) {\n    const {defaultValue, options, defaultIndex, renderButtonText} = this.props;\n\n    let value = defaultValue;\n    if (idx == null || !options || idx >= options.length) {\n      idx = defaultIndex;\n    }\n\n    if (idx >= 0) {\n      value = renderButtonText ? renderButtonText(options[idx]) : options[idx].toString();\n    }\n\n    this._nextValue = value;\n    this._nextIndex = idx;\n\n    this.setState({\n      buttonText: value,\n      selectedIndex: idx\n    });\n  }\n\n  _renderButton() {\n    const {disabled, accessible, children, textStyle} = this.props;\n    const {buttonText} = this.state;\n\n    return (\n      <TouchableOpacity ref={button => this._button = button}\n                        disabled={disabled}\n                        accessible={accessible}\n                        onPress={this._onButtonPress}\n      >\n        {\n          children ||\n          (\n            <View style={styles.button}>\n              <Text style={[styles.buttonText, textStyle]}\n                    numberOfLines={1}\n              >\n                {buttonText}\n              </Text>\n            </View>\n          )\n        }\n      </TouchableOpacity>\n    );\n  }\n\n  _onButtonPress = () => {\n    const {onDropdownWillShow} = this.props;\n    if (!onDropdownWillShow ||\n      onDropdownWillShow() !== false) {\n      this.show();\n    }\n  };\n\n  _renderModal() {\n    const {animated, accessible, dropdownStyle} = this.props;\n    const {showDropdown, loading} = this.state;\n    if (showDropdown && this._buttonFrame) {\n      const frameStyle = this._calcPosition();\n      const animationType = animated ? 'fade' : 'none';\n      return (\n        <Modal animationType={animationType}\n               visible={true}\n               transparent={true}\n               onRequestClose={this._onRequestClose}\n               supportedOrientations={['portrait', 'portrait-upside-down', 'landscape', 'landscape-left', 'landscape-right']}\n        >\n          <TouchableWithoutFeedback accessible={accessible}\n                                    disabled={!showDropdown}\n                                    onPress={this._onModalPress}\n          >\n            <View style={styles.modal}>\n              <View style={[styles.dropdown, dropdownStyle, frameStyle]}>\n                {loading ? this._renderLoading() : this._renderDropdown()}\n              </View>\n            </View>\n          </TouchableWithoutFeedback>\n        </Modal>\n      );\n    }\n  }\n\n  _calcPosition() {\n    const {dropdownStyle, style, adjustFrame} = this.props;\n\n    const dimensions = Dimensions.get('window');\n    const windowWidth = dimensions.width;\n    const windowHeight = dimensions.height;\n\n    const dropdownHeight = (dropdownStyle && StyleSheet.flatten(dropdownStyle).height) ||\n      StyleSheet.flatten(styles.dropdown).height;\n\n    const bottomSpace = windowHeight - this._buttonFrame.y - this._buttonFrame.h;\n    const rightSpace = windowWidth - this._buttonFrame.x;\n    const showInBottom = bottomSpace >= dropdownHeight || bottomSpace >= this._buttonFrame.y;\n    const showInLeft = rightSpace >= this._buttonFrame.x;\n\n    const positionStyle = {\n      height: dropdownHeight,\n      top: showInBottom ? this._buttonFrame.y + this._buttonFrame.h : Math.max(0, this._buttonFrame.y - dropdownHeight),\n    };\n\n    if (showInLeft) {\n      positionStyle.left = this._buttonFrame.x;\n    } else {\n      const dropdownWidth = (dropdownStyle && StyleSheet.flatten(dropdownStyle).width) ||\n        (style && StyleSheet.flatten(style).width) || -1;\n      if (dropdownWidth !== -1) {\n        positionStyle.width = dropdownWidth;\n      }\n      positionStyle.right = rightSpace - this._buttonFrame.w;\n    }\n\n    return adjustFrame ? adjustFrame(positionStyle) : positionStyle;\n  }\n\n  _onRequestClose = () => {\n    const {onDropdownWillHide} = this.props;\n    if (!onDropdownWillHide ||\n      onDropdownWillHide() !== false) {\n      this.hide();\n    }\n  };\n\n  _onModalPress = () => {\n    const {onDropdownWillHide} = this.props;\n    if (!onDropdownWillHide ||\n      onDropdownWillHide() !== false) {\n      this.hide();\n    }\n  };\n\n  _renderLoading() {\n    return (\n      <ActivityIndicator size='small'/>\n    );\n  }\n\n  _renderDropdown() {\n    const {scrollEnabled, renderSeparator, showsVerticalScrollIndicator, keyboardShouldPersistTaps} = this.props;\n    return (\n      <ListView scrollEnabled={scrollEnabled}\n                style={styles.list}\n                dataSource={this._dataSource}\n                renderRow={this._renderRow}\n                renderSeparator={renderSeparator || this._renderSeparator}\n                automaticallyAdjustContentInsets={false}\n                showsVerticalScrollIndicator={showsVerticalScrollIndicator}\n                keyboardShouldPersistTaps={keyboardShouldPersistTaps}\n      />\n    );\n  }\n\n  get _dataSource() {\n    const {options} = this.props;\n    const ds = new ListView.DataSource({\n      rowHasChanged: (r1, r2) => r1 !== r2\n    });\n    return ds.cloneWithRows(options);\n  }\n\n  _renderRow = (rowData, sectionID, rowID, highlightRow) => {\n    const {renderRow, dropdownTextStyle, dropdownTextHighlightStyle, accessible} = this.props;\n    const {selectedIndex} = this.state;\n    const key = `row_${rowID}`;\n    const highlighted = rowID == selectedIndex;\n    const row = !renderRow ?\n      (<Text style={[\n        styles.rowText,\n        dropdownTextStyle,\n        highlighted && styles.highlightedRowText,\n        highlighted && dropdownTextHighlightStyle\n      ]}\n      >\n        {rowData}\n      </Text>) :\n      renderRow(rowData, rowID, highlighted);\n    const preservedProps = {\n      key,\n      accessible,\n      onPress: () => this._onRowPress(rowData, sectionID, rowID, highlightRow),\n    };\n    if (TOUCHABLE_ELEMENTS.find(name => name == row.type.displayName)) {\n      const props = {...row.props};\n      props.key = preservedProps.key;\n      props.onPress = preservedProps.onPress;\n      const {children} = row.props;\n      switch (row.type.displayName) {\n        case 'TouchableHighlight': {\n          return (\n            <TouchableHighlight {...props}>\n              {children}\n            </TouchableHighlight>\n          );\n        }\n        case 'TouchableOpacity': {\n          return (\n            <TouchableOpacity {...props}>\n              {children}\n            </TouchableOpacity>\n          );\n        }\n        case 'TouchableWithoutFeedback': {\n          return (\n            <TouchableWithoutFeedback {...props}>\n              {children}\n            </TouchableWithoutFeedback>\n          );\n        }\n        case 'TouchableNativeFeedback': {\n          return (\n            <TouchableNativeFeedback {...props}>\n              {children}\n            </TouchableNativeFeedback>\n          );\n        }\n        default:\n          break;\n      }\n    }\n    return (\n      <TouchableHighlight {...preservedProps}>\n        {row}\n      </TouchableHighlight>\n    );\n  };\n\n  _onRowPress(rowData, sectionID, rowID, highlightRow) {\n    const {onSelect, renderButtonText, onDropdownWillHide} = this.props;\n    if (!onSelect || onSelect(rowID, rowData) !== false) {\n      highlightRow(sectionID, rowID);\n      const value = renderButtonText && renderButtonText(rowData) || rowData.toString();\n      this._nextValue = value;\n      this._nextIndex = rowID;\n      this.setState({\n        buttonText: value,\n        selectedIndex: rowID\n      });\n    }\n    if (!onDropdownWillHide || onDropdownWillHide() !== false) {\n      this.setState({\n        showDropdown: false\n      });\n    }\n  }\n\n  _renderSeparator = (sectionID, rowID, adjacentRowHighlighted) => {\n    const key = `spr_${rowID}`;\n    return (\n      <View style={styles.separator}\n            key={key}\n      />\n    );\n  };\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    justifyContent: 'center'\n  },\n  buttonText: {\n    fontSize: 12\n  },\n  modal: {\n    flexGrow: 1\n  },\n  dropdown: {\n    position: 'absolute',\n    height: (33 + StyleSheet.hairlineWidth) * 5,\n    borderWidth: StyleSheet.hairlineWidth,\n    borderColor: 'lightgray',\n    borderRadius: 2,\n    backgroundColor: 'white',\n    justifyContent: 'center'\n  },\n  loading: {\n    alignSelf: 'center'\n  },\n  list: {\n    //flexGrow: 1,\n  },\n  rowText: {\n    paddingHorizontal: 6,\n    paddingVertical: 10,\n    fontSize: 11,\n    color: 'gray',\n    backgroundColor: 'white',\n    textAlignVertical: 'center'\n  },\n  highlightedRowText: {\n    color: 'black'\n  },\n  separator: {\n    height: StyleSheet.hairlineWidth,\n    backgroundColor: 'lightgray'\n  }\n});\n"]},"metadata":{},"sourceType":"module"}